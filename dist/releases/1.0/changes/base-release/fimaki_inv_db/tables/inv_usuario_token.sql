-- liquibase formatted sql
-- changeset FIMAKI_INV_DB:1755640727295 stripComments:false  logicalFilePath:base-release/fimaki_inv_db/tables/inv_usuario_token.sql runAlways:false runOnChange:false replaceIfExists:true failOnError:true
-- sqlcl_snapshot src/database/fimaki_inv_db/tables/inv_usuario_token.sql:null:e50d677bb233255cc3341dc4697dde938abb67bd:create

create table fimaki_inv_db.inv_usuario_token (
    id_token         number
        generated by default as identity
    not null enable,
    id_usuario       number,
    token            varchar2(64 byte) not null enable,
    tipo_rc          varchar2(30 byte) not null enable,
    fecha_generacion timestamp(6) with local time zone default current_timestamp,
    expiracion       timestamp(6) with local time zone default current_timestamp + interval '1' hour,
    usado            char(1 byte) default 'N',
    fecha_uso        timestamp(6) with local time zone,
    ip_uso           varchar2(45 byte),
    user_agent_uso   varchar2(400 byte),
    correo           varchar2(100 char)
);

alter table fimaki_inv_db.inv_usuario_token
    add
        check ( usado in ( 'S', 'N' ) ) enable;

alter table fimaki_inv_db.inv_usuario_token
    add constraint inv_usuario_token_pk primary key ( id_token )
        using index enable;

alter table fimaki_inv_db.inv_usuario_token add constraint inv_usuario_token_uk unique ( token )
    using index enable;

