-- liquibase formatted sql
-- changeset FIMAKI_BACK_DB:1755640726624 stripComments:false  logicalFilePath:base-release/fimaki_back_db/tables/usuario_token.sql runAlways:false runOnChange:false replaceIfExists:true failOnError:true
-- sqlcl_snapshot src/database/fimaki_back_db/tables/usuario_token.sql:null:ebe019f6ff0a0ee1c0448fab59d9b30d814bdf9c:create

create table fimaki_back_db.usuario_token (
    id_token         number
        generated by default as identity
    not null enable,
    id_usuario       number not null enable,
    token            varchar2(64 byte) not null enable,
    tipo_rc          varchar2(30 byte) not null enable,
    fecha_generacion timestamp(6) with local time zone default current_timestamp,
    expiracion       timestamp(6) with local time zone default current_timestamp + interval '1' hour,
    usado            char(1 byte) default 'N',
    fecha_uso        timestamp(6) with local time zone,
    ip_uso           varchar2(45 byte),
    user_agent_uso   varchar2(400 byte)
);

alter table fimaki_back_db.usuario_token
    add
        check ( usado in ( 'S', 'N' ) ) enable;

alter table fimaki_back_db.usuario_token add constraint usuario_token_uk unique ( token )
    using index enable;

alter table fimaki_back_db.usuario_token add primary key ( id_token )
    using index enable;

